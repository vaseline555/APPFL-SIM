backend: serial
exp_name: leaf-sent140-seqacc
algorithm: fedavg

dataset: sent140
dataset_loader: leaf
model_name: StackedLSTM
model_source: appfl
model_kwargs:
  is_seq2seq: false

num_clients: 0
infer_num_clients: true
num_rounds: 2
num_sampled_clients: 1

split_type: iid
local_epochs: 1
batch_size: 32

optimizer: SGD
criterion: CrossEntropyLoss
lr: 0.01
weight_decay: 0.0
max_grad_norm: 0.0

eval_metrics: [seqacc]

enable_global_eval: false
enable_federated_eval: true
eval_every: 1
federated_eval_scheme: holdout_dataset
holdout_client_counts: 0
federated_eval_client_ratio: 1.0

device: cuda
server_device: cuda:0

# Large-client scalability knobs
stateful_clients: false
client_processing_chunk_size: 16
on_demand_num_workers: 0
on_demand_eval_num_workers: 0
pin_memory: true
dataloader_persistent_workers: false
dataloader_prefetch_factor: 2

download: true
data_dir: ./data
log_dir: ./logs

# Sent140 defaults expected by LEAF parser/model
embedding_size: 128
hidden_size: 64
num_layers: 2
dropout: 0.0

logging_backend: file
project_name: metrics-examples
experiment_name: leaf-sent140-seqacc
